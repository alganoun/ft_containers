name: Third party testing

on: [push, pull_request]

jobs:
  launch_tester_linux:
    runs-on: ubuntu-latest
    name: Third party testing Linux
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
        with:
          submodules: true
      - name: Install Progs for Tester
        run: |
          sudo apt update
          sudo apt install -y bash clang valgrind
      - name: Environnement Informations
        run: |
          echo OS version
          lsb_release -a
          echo
          echo Linux kernel version
          uname -r
          echo
          echo Clang version
          clang++ --version
          echo
          echo Valgrind version
          valgrind --version
          echo
          echo DiffUtils version
          diff --version
        shell: bash
      - name: Launch Script
        run: cd containers_test && ./do.sh vector
        shell: bash
        continue-on-error: true
  launch_tester_macos:
    runs-on: macos-latest
    name: Third party testing MacOS
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
        with:
          submodules: true
      - name: Environnement Informations
        run: |
          echo OS version
          system_profiler SPSoftwareDataType
          echo
          echo Clang version
          clang++ --version
          echo
          echo DiffUtils version
          diff --version
      - name: Launch Script
        run: cd containers_test && ./do.sh vector
        shell: bash
        continue-on-error: true
